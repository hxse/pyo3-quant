# 交易哲学与系统设计白皮书

> **核心宗旨**：利用小资金的灵活性与高杠杆，通过非对称博弈（Asymmetric Betting）捕捉短期市场红利，并将利润转化为长期无风险资产。

---

## 1. 核心哲学：散户的非对称博弈论

传统的机构风控理论（追求 20 年稳健、低杠杆、低回撤）是为“大资金”设计的枷锁，对于资金量较小的个人投资者（Retail Investor），盲目模仿机构无异于**主动降低利润**和**浪费时间**。
*   **理念差异**：散户小资金与机构大资金的玩法本质上不同，不能人云亦云。机构追求稳健是为了保住饭碗，散户追求高增长是为了改变命运。

本系统的设计基于以下核心认知：

### 1.1 哑铃策略 (Barbell Strategy)
我们将资产配置两极化，拒绝中庸：
*   **左端（进攻）**：小资金（如 1 个月工资） x 极高杠杆 x 激进策略。利用 Crypto 或高波动市场的短期非有效性，追求 10 倍、100 倍的爆发性增长。
*   **右端（防守）**：大资金（利润转移） x 无杠杆 x 长期持有。将进攻端赚取的超额利润提取一部分，存入纳斯达克指数基金或高股息资产，享受复利。
*   **中间地带**：不仅不碰，而且要极力避免那些“低不成高不就”的平庸策略。

### 1.2 接受爆仓作为“经营成本”
*   小资金的优势在于**船小好调头**和**可承受归零**。
*   **初始资金定义**：建议使用**不超过一个月工资**（如 3000 元）作为初始本金。这是真正“不怕爆仓”的心理安全线。
*   对于激进账户，爆仓不是失败，而是为了获取超额收益所支付的必然成本。只要 **(总提取利润 + 剩余残值) > 投入本金总额**，系统就是盈利的。
*   **激进中的秩序**：虽然接受爆仓，但策略本身必须包含严格的**量化风控**。利用指标（如 ATR）和订单逻辑（SL, TP, TSL, PSAR）进行保护，绝非盲目赌博。

### 1.3 利润收割机制 (Profit Harvesting)
既然策略终将失效，系统唯一的目标就是**在失效前把肉带离餐桌**：
*   **本金抽离**：虽名为“抽本”，但因为初始本金很小（如 3000 元），重点不在于保本，而在于心态建设。
*   **利润大挪移**：真正的核心是**大额利润提取**。例如用 3000 元赚到了 30,000 元，应提取 10,000 元（甚至是本金的数倍）放入股市。
*   **定期分红 (Dividend Payout)**：每翻倍一次，就切掉一大块利润转移至“右端”安全账户。坚决不搞“滚雪球直到爆炸”，而是“滚出的雪球不断搬回家”。

---

## 2. 交易方法论：快进快出与多维过滤

### 2.1 拒绝长周期历史
*   **短视是美德**：只回测近 2-3 年的数据。10 年前的数据代表的是旧的市场结构（Regime），对高增长策略不仅无用，甚至是噪音。
*   **必然规律**：回测近期数据虽然能得到高回报，但**策略生命周期也会变短**。这是高增长的代价。
*   **动态迭代**：如果策略在近半年表现不佳，直接废弃。不寻求修复，寻求替代。系统必须支持快速且持续的策略研发。

### 2.2 三重滤网 (Triple Screen)
利用多周期架构提高胜率，而非追求单次交易的完美：
*   **大周期**：判断趋势（如周线/日线趋势）。
*   **中周期**：寻找波段（如 4H 均值回归）。
*   **小周期**：精确入场（如 1hm 突破）。

### 2.3 纯技术驱动
*   **基本面无用论**：散户很难拥有机构级别的信息优势和基本面分析能力，应专注于纯粹的技术分析（TA）。
*   **硬件限制**：散户的网络环境一般，不适合做高频交易（HFT）或剥头皮（Scalping）。本系统专注于中短线波段。
*   不看基本面，不听消息。完全基于价格行为（Price Action）和量化指标（TA）。
*   利用 ADX 等指标识别趋势/震荡状态，动态规避垃圾行情。

---

## 3. 技术架构映射：为理念量身打造

`pyo3-quant` 系统不是一个通用的回测框架，它是一个**高增长策略的孵化器**。所有的技术选型都服务于上述哲学。

### 3.1 为什么是 Rust?
*   **极致并发**：为了在短时间内找到**近几年有效的行情模式**，我们需要对海量参数进行网格/随机搜索。Rust 的无锁并发能力支持我们在单机上跑满所有 CPU 核心。
*   **安全的高性能**：**拒绝 Python 核心**。所有的回测计算、指标计算、风控逻辑全部在 Rust 层完成，Python 仅作为胶水语言。这意味着极致的性能和内存安全。

### 3.2 矢量化与单仓位设计
*   **默认无杠杆回测**：回测系统默认不加杠杆，专注于验证策略的纯逻辑有效性（Alpha）。这保证了数据的纯净性。
*   **策略堆叠 (Stacking)**：
    1.  **单体多模式**：支持在单个回测中通过指标（如 ADX）区分不同行情（Trend/Range），调用不同的逻辑，但本质依然是单仓位输出（1, 0, -1）。
    2.  **多体撮合**：也可以运行多个独立的单仓位策略回测，最终在**实盘交易机器人**端进行净头寸撮合（Netting）。这是最灵活的扩展方式。

### 3.3 核心数学引擎：杠杆与优化的闭环
这是本系统最精华的设计，直接服务于“高增长”目标：

#### A. MaxSafeLeverage (最大安全杠杆)
我们不问“我要上多少倍杠杆”，我们问“基于历史回撤，我能 **安全地** 上多少倍杠杆”。
*   **公式**：$$ Leverage = \frac{SafetyFactor}{MaxDrawdown} $$
*   **逻辑**：如果回测 MDD 是 10%，设定的安全系数是 0.8（激进模式，允许回撤本金的 80%），那么实盘杠杆 = 8倍。即使 MDD 是 20%，杠杆依然有 4 倍。
*   **哲学意义**：它将 **策略逻辑 (Alpha)** 与 **风险承载 (Beta)** 解耦。策略只需负责把曲线做平滑（减小 MDD），系统会自动奖励更高的杠杆，从而实现几何级数的收益增长。

#### B. Calmar Priority (卡尔马优先)
为了配合上述杠杆模型，优化器 **建议的最优先目标** 是 **卡尔马比率 (Calmar Ratio)**。
*   **公式**：$$ Calmar = \frac{AnnualReturn}{MaxDrawdown} $$
*   **为什么不是夏普 (Sharpe)**？夏普比率惩罚上行波动（暴涨），而我们要的正是非对称的暴涨。
*   **闭环流程**：
    1.  **优化目标**：最大化 Calmar Ratio（这会自动压低 MDD 同时拉高 Return）。
    2.  **中间产物**：得到一个经优化的、相对较小的 MDD。
    3.  **计算杠杆**：将此 MDD 代入 $$ SafetyFactor / MDD $$ 公式，计算出实盘能承受的**最大安全杠杆**。
    4.  **实盘部署**：直接使用该杠杆上线。
*   **结论**：在小资金激进体系下，Calmar 不仅仅是一个评价指标，它是**通往高杠杆实盘的唯一钥匙**。

### 3.4 策略模版系统
*   **热更新**：设计了 JSON/Python 配置化的 `SignalTemplate`。修改策略逻辑**不需要重新编译 Rust 核心**，这对于高频迭代的散户至关重要。
*   **参数分离**：参数与逻辑解耦，为未来的**全局随机搜索（Global Random Search）**优化器打好基础。

### 3.5 排除过拟合与验证
*   **向前测试 (Walk-Forward)**：拒绝自举法（Bootstrap）和蒙特卡洛（Monte Carlo），因为它们打乱了时间序列的趋势结构。我们只相信滚动时间窗口的实战模拟。
    *   **动态再优化**：在每个滚动窗口（Rolling Window）中，都会**重新优化一遍参数**。这模拟了实盘中不断适应新行情的真实过程，确保策略始终保持“动态”和“鲜活”。

---

## 4. 总结：小资金的生存之道

> **"小资金+低利润 = 浪费时间"**

本系统的核心使命是**效率**：
1.  **研发效率**：Rust + Python 混合架构，快速编写，极速回测。
2.  **资金效率**：高杠杆 + 激进风控，让每一分钱都在前线冲锋。
3.  **生命效率**：通过利润收割，尽快完成资本原始积累，从而进入“钱生钱”的从容阶段。

这是一套属于**进攻者**的系统。
